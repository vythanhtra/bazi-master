# BaZi Master - Environment Variables Configuration

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Development (SQLite)
DATABASE_URL="file:./dev.db"

# Production (PostgreSQL) - Uncomment and configure for production
# DATABASE_URL="postgresql://username:password@localhost:5432/bazi_master"

# =============================================================================
# SESSION & SECURITY
# =============================================================================

# Session token secret - MUST be changed in production (32+ characters)
SESSION_TOKEN_SECRET="your-super-secret-session-key-change-this-in-production"

# Admin email addresses (comma-separated)
ADMIN_EMAILS="admin@example.com"

# Allow localhost URLs in production (for testing only)
ALLOW_LOCALHOST_PROD=false

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server port
PORT=4000

# Frontend URL (used for CORS and redirects)
FRONTEND_URL="http://localhost:3000"

# Backend API base URL
BACKEND_BASE_URL="http://localhost:4000"

# Node environment
NODE_ENV="development"

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limit window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per window (default: 120)
RATE_LIMIT_MAX=120

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Redis URL for sessions and caching
REDIS_URL="redis://localhost:6379"

# AI Service Providers (optional)
OPENAI_API_KEY=""
ANTHROPIC_API_KEY=""

# AI Model Configuration
OPENAI_MODEL="gpt-4o-mini"
ANTHROPIC_MODEL="claude-3-5-sonnet-20240620"

# =============================================================================
# OAUTH CONFIGURATION
# =============================================================================

# Google OAuth (optional)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
GOOGLE_REDIRECT_URI="http://localhost:4000/api/auth/google/callback"

# WeChat OAuth (optional)
WECHAT_APP_ID=""
WECHAT_APP_SECRET=""
WECHAT_SCOPE="snsapi_login"
WECHAT_FRONTEND_URL="http://localhost:3000"
WECHAT_REDIRECT_URI="http://localhost:4000/api/auth/wechat/callback"

# Development OAuth settings
ALLOW_DEV_OAUTH=true

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Additional allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=""

# Trust proxy setting (1 for most load balancers)
TRUST_PROXY=""

# =============================================================================
# PERFORMANCE & LIMITS
# =============================================================================

# Request body size limit
JSON_BODY_LIMIT="50mb"

# URL length limit
MAX_URL_LENGTH=16384

# AI request timeout
AI_TIMEOUT_MS=15000

# AI max tokens
AI_MAX_TOKENS=700

# Import batch size
IMPORT_BATCH_SIZE=500

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Shutdown timeout
SHUTDOWN_TIMEOUT_MS=10000

# Session idle timeout
SESSION_IDLE_MS=1800000

# BaZi cache settings
BAZI_CACHE_TTL_MS=21600000
BAZI_CACHE_MAX_ENTRIES=500
