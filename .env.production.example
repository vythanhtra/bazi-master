# Production Environment Configuration (minimal)
# Copy this file to .env.production and configure for your production environment

NODE_ENV=production
PORT=4000
GRACEFUL_SHUTDOWN_TIMEOUT_MS=10000
RUN_MIGRATIONS_ON_START=true
# Optional HTTP server timeouts (ms)
# SERVER_KEEP_ALIVE_TIMEOUT_MS=5000
# SERVER_HEADERS_TIMEOUT_MS=60000
# SERVER_REQUEST_TIMEOUT_MS=300000

# Database - PostgreSQL REQUIRED for production
DATABASE_URL=postgresql://user:password@host:5432/bazi_master?schema=public

# Redis - REQUIRED for production (session store, caching, rate limiting)
REDIS_URL=redis://redis:6379

# CORS Configuration
FRONTEND_URL=https://app.yourdomain.com
BACKEND_BASE_URL=https://api.yourdomain.com
CORS_ALLOWED_ORIGINS=https://app.yourdomain.com
TRUST_PROXY=1

# Session Security - REQUIRED 32+ character random string
SESSION_TOKEN_SECRET=your-32-character-or-longer-random-secret-here
SESSION_COOKIE_SAMESITE=strict
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_DOMAIN=

# Admin Configuration
ADMIN_EMAILS=admin@yourdomain.com

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120

# Password Reset Configuration
PASSWORD_RESET_ENABLED=true
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_smtp_user
SMTP_PASS=your_smtp_password
SMTP_FROM="BaZi Master <no-reply@yourdomain.com>"
PASSWORD_RESET_DEBUG_LOG=false

# API Docs Basic Auth (production access to /api-docs)
DOCS_USER=admin
DOCS_PASSWORD=change_me

# AI Provider Configuration (optional)
AI_PROVIDER=openai
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-5-sonnet-20240620

# Google OAuth Configuration (optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=

# WeChat OAuth Configuration (optional)
WECHAT_APP_ID=
WECHAT_APP_SECRET=
WECHAT_SCOPE=snsapi_login
WECHAT_FRONTEND_URL=
WECHAT_REDIRECT_URI=

# Safety switches
ALLOW_DEV_OAUTH=false
ALLOW_SQLITE_PROD=false
ALLOW_LOCALHOST_PROD=false

# Observability (optional)
SENTRY_DSN=
VITE_SENTRY_DSN=

