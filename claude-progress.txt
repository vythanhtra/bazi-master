- Read app_spec.txt and generated feature_list.json with 479 detailed test cases covering all required categories and long-form flows.
- Created init.sh for environment setup guidance.
- Added README.md and base project directories: frontend/, backend/, prisma/, docs/.
- Initialized git repository and committed initial setup.
- Implemented a Vite + React + Tailwind frontend scaffold with routing, i18n, and protected routes (Home/Login/Profile/History/Bazi/Tarot/Iching/Zodiac).
- Added minimal Express backend scaffold with /health endpoint and npm scripts.
- init.sh now succeeds after backend package.json added (frontend and backend installs).
- Implemented real auth + frontend integration (Login/Register verified).
- Set up Playwright for headless E2E testing (verified with npm run dev + npx playwright test).
- Environment is healthy: Ports 3000/4000 fixed, DB synced.
- Ready to implement Bazi calculation features.
- Implemented Bazi calculation backend with lunar-javascript pillars, five elements, Ten Gods, and luck cycles plus auth-protected save/history/favorite endpoints.
- Added Prisma models for bazi records and favorites, regenerated Prisma client for backend.
- Built Bazi UI form, results display, full analysis, save to history, and add to favorites flows.
- Implemented History and Favorites pages with real data fetch and delete actions; added Favorites route and nav.
- Added Playwright verification scripts and captured screenshots in verification/.
- Verified auth guard redirect to login and API 401 without token.
- Marked feature_list.json test #1 (registered user journey) as passing. Current progress: 6/479 tests passing.
- Next: implement guest Bazi flow and expand Bazi analysis accuracy, then continue remaining functional tests.
- Implemented guest Bazi calculation persistence via localStorage restore and status messaging.
- Added Playwright guest verification script with refresh persistence checks and screenshots.
- Verified guest Bazi flow end-to-end; marked test #2 as passing. Current progress: 7/479 tests passing.
- Next: address remaining Bazi-related functional tests (timezone/true solar time) before Tarot/Iching modules.
- Enhanced accessibility: Ensured WCAG AA color contrast compliance (extended gold palette, fixed contrast issues in Zodiac module, added global default text color).
- Fixed auth/profile regression by removing unsupported react-router blocker usage and added UserSettings/IchingRecord tables to Prisma.
- Implemented I Ching history save/load/delete API + UI, added save action + history panel, and created Playwright verification script.
- Re-verified registered + guest BaZi flows via Playwright scripts; added I Ching end-to-end verification with screenshots.
- Marked feature_list.json test #4 as passing. Current progress: 9/479 tests passing.
- Next: continue remaining I Ching/Tarot/Zodiac functional tests and align feature_list steps for non-BaZi modules.
- Fixed SQLite raw query alias error in soft-delete check (renamed alias to avoid reserved keyword).
- Re-verified registered Bazi flow and I Ching flow via Playwright scripts; captured new screenshots.
- Marked feature_list.json test #5 as passing. Current progress: 10/479 tests passing.
- Next: continue remaining cross-module functional tests and start Tarot/Zodiac flows.
- Updated Google OAuth start endpoint to redirect back to login with a not-configured error instead of returning raw JSON, keeping OAuth flow consistent with frontend error handling.
- Re-ran core Playwright checks: bazi-calculation and iching specs; fixed port conflict and confirmed pass.
- Verified login flow including mocked Google OAuth redirect via Playwright (login.spec.js). Marked feature_list.json test #6 as passing. Current progress: 11/479 tests passing.
- Next: continue remaining functional tests (Tarot/Zodiac) and ensure OAuth can be validated with real provider credentials if available.
- Verified core flows (BaZi guest + I Ching) via Playwright before new work; both passed.
- Fixed WeChat OAuth redirect to return to login when not configured and aligned frontend error messaging.
- Updated backend default FRONTEND_URL to http://localhost:3000 to match Vite config.
- Added Playwright coverage for WeChat OAuth redirect success (mocked) and not-configured error state.
- Re-ran login Playwright suite; all tests passed.
- Marked feature_list.json test #7 as passing. Current progress: 12/479 tests passing.
- Next: continue remaining functional tests (Tarot/Zodiac) and validate OAuth with real provider credentials if available.
- Fixed backend startup crash caused by duplicate baziCache imports and restarted services.
- Verified History CRUD + export/import Playwright flows (tests/history-crud.spec.js, tests/export-import.spec.js).
- Marked feature_list.json test #8 as passing. Current progress: 13/479 tests passing.
- Next: continue remaining functional tests (Tarot/Zodiac) and validate OAuth with real provider credentials if available.
- Added BaZi time context panel showing timezone input, resolved offset, and UTC birth timestamp; improved timezone offset payload handling to defer IANA offsets to backend.
- Hardened soft-delete initialization: ensure BaziRecordTrash table is created on startup, added guard around soft-delete checks, and created missing table in dev.db.
- Mounted API router on /api for frontend compatibility.
- Added Playwright timezone flow test with screenshots, including full analysis, save/favorite/history verification, and cleanup.
- Verified timezone flow end-to-end via Playwright; marked feature_list.json test #10 as passing. Current progress: 14/479 tests passing.
- Next: continue remaining Bazi-related tests (true solar time/timezone accuracy) and move into Tarot/Zodiac modules.
- Added true solar time correction using birth location: resolves coordinates from known cities/lat-lon, applies longitude-based correction, and surfaces the corrected timestamp + metadata in BaZi time context.
- Updated BaZi UI with location hint and true solar time fields, plus i18n strings for the new metadata.
- Added Playwright true solar time flow test with screenshots; verified end-to-end and marked feature_list.json test #11 as passing. Current progress: 15/479 tests passing.
- Next: continue remaining BaZi-related tests (true solar/time accuracy edge cases) then move into Tarot/Zodiac modules.
- Added Playwright coverage for Zodiac rising sign calculation with screenshots and console error checks.
- Verified Zodiac rising sign flow end-to-end via Playwright; marked feature_list.json test #12 as passing. Current progress: 16/479 tests passing.
- Init script currently stops on Prisma data-loss warning for BaziRecordTrash (non-empty).
- Next: continue remaining Zodiac functional tests (horoscope periods, compatibility, rising sign edge cases) and ensure OAuth provider validation if needed.
- Added History management Playwright coverage for filter/sort/delete/restore with screenshots, and enhanced History deleted list to show location plus data-testid hooks for stable automation.
- Verified history management flow end-to-end via Playwright (history-management.spec.js) with screenshots captured.
- Marked feature_list.json test #9 (History management flow) as passing. Current progress: 17/479 tests passing.
- Next: continue remaining functional tests (Favorites management, Tarot, Zodiac horoscope/compatibility flows) and resolve any init.sh Prisma data-loss prompt.
