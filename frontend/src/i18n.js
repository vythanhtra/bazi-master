import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

const resources = {
  'en-US': {
    translation: {
      nav: {
        home: 'Home',
        login: 'Login',
        bazi: 'BaZi',
        tarot: 'Tarot',
        iching: 'I Ching',
        zodiac: 'Zodiac',
        ziwei: 'Zi Wei',
        profile: 'Profile',
        history: 'History',
        favorites: 'Favorites',
        logout: 'Logout',
        skip: 'Skip to content',
        admin: 'Admin',
        toggleMenu: 'Toggle Menu',
        switchToEn: 'Switch to English',
        switchToZh: 'Switch to Chinese',
        switchToTw: 'Switch to Traditional Chinese'
      },
      common: {
        save: 'Save',
        cancel: 'Cancel',
        ok: 'OK',
        delete: 'Delete',
        loading: 'Loading...',
        calculating: 'Calculating...',
        retry: 'Retry',
        error: 'Error',
        success: 'Success',
        warning: 'Warning',
        back: 'Back',
        none: 'None',
        action: 'Action',
        year: 'Year',
        month: 'Month',
        day: 'Day',
        loadingAccount: 'Loading your account...', 
        loadAccountError: 'Unable to load your account. Please try again.',
        signInAgain: 'Sign in again'
      },
      errors: {
        network: 'Network error. Please check your connection and try again.',
        unknown: 'An unexpected error occurred.',
        offline: 'You are offline. Reconnect to retry.',
        unsavedChanges: 'You have unsaved changes. Are you sure you want to leave this page?',
        saveInProgress: 'A save is in progress. Please wait for it to finish before leaving this page.',
        loadLocations: 'Unable to load locations.',
        actionQueued: '{{label}} queued for retry.',
        itemsFailed: '{{count}} item(s) failed'
      },
      home: {
        title: 'BaZi Master',
        subtitle: 'Unlock your destiny with ancient wisdom',
        cta: 'Start your journey',
        oraclePlatform: 'Oracle Platform',
        modules: {
          bazi: { desc: 'Four Pillars & Five Elements' },
          tarot: { desc: 'Daily draw & spreads' },
          iching: { desc: 'Hexagram insights' },
          zodiac: { desc: 'Signs & horoscopes' },
          ziwei: { desc: 'V2 palace chart preview' }
        }
      },
      login: {
        title: 'Welcome Back',
        email: 'Email',
        password: 'Password',
        submit: 'Sign In',
        registerTitle: 'Create account',
        registerSubmit: 'Create account',
        sessionExpired: 'Your session expired. Please sign in again to continue.',
        errors: {
          emailRequired: 'Email is required.',
          emailInvalid: 'Enter a valid email address.',
          passwordRequired: 'Password is required.',
          passwordStrength: 'Password must be at least 8 characters and include letters and numbers.',
          passwordsNotMatch: 'Passwords do not match.',
          nameTooShort: 'Name must be at least 2 characters.',
          loginFailed: 'Incorrect email or password.',
          tokenRequired: 'Reset code is required.',
          newPasswordRequired: 'New password is required.'
        },
        ui: {
          displayName: 'Display name (optional)',
          confirmPassword: 'Confirm password',
          forgotPassword: 'Forgot password?',
          haveCode: 'Have a reset code?',
          newHere: 'New here?',
          backToLogin: 'Back to login',
          resetPassword: 'Reset password',
          setNewPassword: 'Set new password',
          sendResetLink: 'Send reset link',
          updatePassword: 'Update password',
          resetSent: 'If an account exists for that email, a reset link has been sent.',
          passwordUpdated: 'Password updated. You can log in now.',
          continueWithGoogle: 'Continue with Google',
          continueWithWeChat: 'Continue with WeChat',
          demoAccess: 'Demo access only: use any email and password to continue.',
          resetCode: 'Reset code',
          newPassword: 'New password',
          pasteResetCode: 'Paste the reset code',
          sending: 'Sending...',
          updating: 'Updating...',
          resetDemoHint: 'For this demo, reset codes are logged on the server.',
          resendReset: 'Resend reset link',
          registering: 'Registering...'
        }
      },
      protected: {
        title: 'Sacred Archive',
        subtitle: 'Only registered seekers may enter.'
      },
      bazi: {
        title: 'BaZi Destiny Chart',
        subtitle: 'Enter your birth data to reveal the Four Pillars and Five Elements.',
        birthYear: 'Birth Year',
        birthMonth: 'Birth Month',
        birthDay: 'Birth Day',
        birthHour: 'Birth Hour (0-23)',
        gender: 'Gender',
        genderPlaceholder: 'Select gender',
        genderFemale: 'Female',
        genderMale: 'Male',
        birthLocation: 'Birth Location',
        locationPlaceholder: 'City / Country',
        locationHint: 'Supports coordinates (lat, lon) or common cities like Beijing, Shanghai, London, New York.',
        timezone: 'Timezone',
        calculate: 'Calculate',
        fullAnalysis: 'Request Full Analysis',
        saveRecord: 'Save to History',
        addFavorite: 'Add to Favorites',
        reset: 'Reset',
        retryNow: 'Retry now',
        dismiss: 'Dismiss',
        calculated: 'Basic chart generated.',
        restored: 'Restored your last guest calculation.',
        fullReady: 'Full analysis ready.',
        saved: 'Record saved to history.',
        favorited: 'Added to favorites.',
        favoriteReady: 'Favorite saved. View it in Favorites.',
        loginRequired: 'Please log in to access this feature.',
        saveFirst: 'Save the record before favoriting.',
        fullRequired: 'Request full analysis before asking AI.',
        aiInterpret: 'Open AI',
        aiOpen: 'Open AI dialog',
        aiThinking: 'Consulting the oracle...',
        aiReady: 'AI interpretation ready.',
        aiAnalysis: 'AI BaZi Analysis',
        fourPillars: 'Four Pillars',
        fiveElements: 'Five Elements',
        tenGods: 'Ten Gods',
        luckCycles: 'Major Luck Cycles',
        timeContext: 'Time Context',
        timezoneInput: 'Timezone Input',
        timezoneResolved: 'Resolved Offset',
        birthUtc: 'Birth Time (UTC)',
        trueSolarTime: 'True Solar Time',
        trueSolarCorrection: 'True Solar Correction',
        trueSolarLocation: 'Location Used',
        trueSolarUnavailable: 'Not available (location not recognized)',
        timezoneUnavailable: 'Unavailable',
        waiting: 'Enter your birth data to generate results.',
        fullWaiting: 'Request full analysis to reveal this section.',
        year: 'Year',
        month: 'Month',
        day: 'Day',
        hour: 'Hour',
        elements: {
          Wood: 'Wood',
          Fire: 'Fire',
          Earth: 'Earth',
          Metal: 'Metal',
          Water: 'Water'
        },
        errors: {
          yearRequired: 'Birth year is required.',
          yearInvalid: 'Enter a valid year.',
          monthRequired: 'Birth month is required.',
          monthInvalid: 'Enter a valid month (1-12).',
          dayRequired: 'Birth day is required.',
          dayInvalid: 'Enter a valid day (1-31).',
          dateInvalid: 'Enter a valid date.',
          futureDate: 'Birth date cannot be in the future.',
          hourRequired: 'Birth hour is required.',
          hourInvalid: 'Enter a valid hour (0-23).',
          genderRequired: 'Gender is required.',
          locationWhitespace: 'Birth location cannot be only whitespace.',
          timezoneWhitespace: 'Timezone cannot be only whitespace.',
          calculateFailed: 'Calculation failed.',
          alreadySaved: 'Record already saved.',
          saveBeforeFavorite: 'Run a calculation before saving to history.'
        },
        retry: {
          bazi_calculate: 'Calculation',
          bazi_full_analysis: 'Full analysis',
          bazi_save: 'Save to history',
          bazi_favorite: 'Add to favorites',
          bazi_ziwei: 'Zi Wei chart'
        }
      },
      history: {
        detailsTitle: 'BaZi Record',
        recordHeading: 'Record #{{id}}',
        detailsSubtitle: 'Review your saved chart details and time context.',
        viewDetails: 'View details',
        backToHistory: 'Back to history',
        recordLoading: 'Loading record...', 
        recordInvalid: 'Invalid record id.',
        recordMissing: 'Record not found.',
        recordLoadError: 'Unable to load record.',
        exportFiltered: 'Export filtered',
        exportAll: 'Export all',
        exporting: 'Exporting...', 
        importFile: 'Import file',
        importing: 'Importing...', 
        importSuccess: 'Imported {{count}} record(s).',
        importError: 'Unable to import history.',
        noRecordsToExport: 'No records available to export.',
        exportSuccess: 'History exported.',
        searchPlaceholder: 'Location, timezone, pillar',
        allGenders: 'All genders',
        allTime: 'All time',
        today: 'Today',
        thisWeek: 'This week',
        last7Days: 'Last 7 days',
        last30Days: 'Last 30 days',
        last90Days: 'Last 90 Days',
        newestSaved: 'Newest saved',
        oldestSaved: 'Oldest saved',
        newestBirth: 'Newest birthdate',
        oldestBirth: 'Oldest birthdate',
        resetFilters: 'Reset filters',
        deletedRecords: 'Deleted records',
        deletedRecordsDesc: 'Restore any record you removed from history.',
        restore: 'Restore',
        recover: 'Recover',
        deletePermanently: 'Delete permanently',
        recordRestored: 'Record restored.',
        recordHardDeleted: 'Record permanently deleted.',
        noResults: 'No results found',
        noResultsDesc: 'Try clearing a filter or searching a different location or pillar.',
        noRecordsYet: 'No records match your current view yet.',
        edit: 'Edit',
        editing: 'Editing',
        saveChanges: 'Save changes',
        selectGender: 'Select a gender',
        invalidYear: 'Enter a valid year.',
        invalidMonth: 'Enter a valid month.',
        invalidDay: 'Enter a valid day.',
        invalidHour: 'Enter a valid hour.',
        invalidDate: 'Date is not valid.',
        bulkDeleteTitle: 'Delete {{count}} selected record(s)?',
        bulkDeleteDesc: 'This removes the selected records from your history. You can restore them later.',
        deleteSelected: 'Delete selected',
        recordDeleted: 'Record deleted.',
        alreadyDeleted: 'Record already deleted.',
        alreadyRemoved: 'Record already removed.',
        restoreError: 'Unable to restore record.',
        deleteError: 'Unable to delete record.',
        updateError: 'Unable to update record.',
        fixFields: 'Fix the highlighted fields to continue.',
        yearPillar: 'Year Pillar',
        dayPillar: 'Day Pillar',
        pageOf: 'Page {{current}} of {{total}}',
        sharedLoaded: 'Shared record loaded',
        clearLink: 'Clear link',
        birth: 'Birth',
        profile: 'Profile',
        selectAll: 'Select all',
        selectedCount: '{{count}} selected',
        clear: 'Clear'
      },
      profile: {
        title: 'Sacred Archive',
        subtitle: 'Only registered seekers may enter.',
        name: 'Name',
        displayName: 'Display name',
        email: 'Email',
        settingsTitle: 'Profile settings',
        settingsSubtitle: 'Keep your locale and ritual preferences synced across devices.',
        locale: 'Locale',
        displayNamePlaceholder: 'Add a short name for your profile',
        displayNameHint: '2-40 characters.',
        preferences: 'Preferences',
        dailyGuidance: 'Daily guidance',
        dailyGuidanceDesc: 'Get a short daily prompt based on your charts.',
        ritualReminders: 'Ritual reminders',
        ritualRemindersDesc: 'Receive reminders for your chosen timing rituals.',
        researchUpdates: 'Research updates',
        researchUpdatesDesc: 'Stay informed on new analyses and insights.',
        aiProvider: 'AI provider',
        aiProviderDesc: 'Select the AI model host for interpretations. Only enabled providers can be saved.',
        preferredProvider: 'Preferred provider',
        useDefault: 'Use default',
        activeServerProvider: 'Active server provider',
        providersEnabled: '{{count}} provider(s) enabled.',
        noProvidersEnabled: 'No providers enabled. Using fallback summaries.',
        saveSettings: 'Save settings',
        saving: 'Saving...',
        settingsSaved: 'Settings saved.',
        cancel: 'Cancel',
        dangerZone: 'Danger Zone',
        dangerZoneDesc: 'Irreversible actions. Proceed with caution.',
        deleteAccount: 'Delete Account',
        deleteAccountTitle: 'Delete your account?',
        deleteAccountDesc: 'This will permanently delete your profile, history, favorites, and settings. This action cannot be undone.',
        confirmDelete: 'Confirm Delete',
        historySnapshot: 'History snapshot',
        historySnapshotDesc: 'Recent BaZi history records synced from your account.',
        openHistory: 'Open history',
        totalRecords: 'Total records',
        showingLatest: 'Showing latest 3 records',
        noHistory: 'No history records yet.',
        ziweiQuickChart: 'Zi Wei (V2) quick chart',
        ziweiQuickChartDesc: 'Generate a Zi Wei chart using your most recent BaZi record.',
        latestBaziRecord: 'Latest saved BaZi record',
        noRecordAvailable: 'No record available',
        generateZiwei: 'Generate Zi Wei Chart',
        ziweiReady: 'Zi Wei chart generated from your latest BaZi record.',
        createBaziFirst: 'Create a BaZi chart first to unlock Zi Wei quick charts.',
        saveBaziFirst: 'Save a BaZi record first to generate Zi Wei charts.',
        calculating: 'Calculating...',
        optional: 'optional',
        unavailable: 'Unavailable',
        unknown: 'Unknown',
        mins: 'mins',
        leap: 'Leap'
      },
      favorites: {
        title: 'Favorites',
        subtitle: 'Curated destiny charts you saved for quick access.',
        savedCount: '{{count}} saved',
        availableToAdd: '{{count}} available to add',
        noFavorites: 'No favorites yet',
        noFavoritesDesc: 'Save a record to keep it handy here.',
        addFromHistory: 'Add from history',
        addFromHistoryDesc: 'Pick from your saved records to add them to favorites.',
        allFavorited: 'All saved records are favorited',
        noHistoryYet: 'No saved history yet',
        noHistoryYetDesc: 'Complete a reading first, then add it here.',
        view: 'View',
        hide: 'Hide',
        share: 'Share',
        remove: 'Remove',
        removing: 'Removing...',
        adding: 'Adding...',
        add: 'Add to favorites',
        shareSuccess: 'Shared successfully.',
        shareFailed: 'Share failed. Copying instead.',
        copied: 'Copied to clipboard.',
        copyFailed: 'Unable to copy share text.',
        loadError: 'Unable to load favorites.',
        recordsLoadError: 'Unable to load records.',
        removeError: 'Unable to remove favorite.',
        addError: 'Unable to add favorite.'
      },
      iching: {
        title: 'I Ching Oracle',
        subtitle: 'Focus on your question and let the numbers reveal the pattern beneath.',
        firstNumber: 'First number',
        secondNumber: 'Second number',
        thirdNumber: 'Third number',
        question: 'Your question (optional)',
        questionPlaceholder: 'What guidance do I need today?',
        divineNumbers: 'Divine with Numbers',
        divineTime: 'Use Current Time',
        divining: 'Divining...',
        revealed: 'The hexagram is revealed.',
        timeRevealed: 'The time hexagram is revealed.',
        primaryHexagram: 'Primary Hexagram',
        resultingHexagram: 'Resulting Hexagram',
        noResulting: 'No resulting hexagram yet.',
        changingLines: 'Changing lines',
        none: 'None',
        timeUsed: 'Time used',
        line: 'Line',
        aiInterpret: 'Reveal AI Interpretation',
        interpreting: 'Interpreting...',
        oracleReflection: 'Oracle Reflection',
        historyTitle: 'I Ching History',
        historySubtitle: 'Saved hexagrams from your recent consultations.',
        noHistory: 'No saved readings yet.',
        savedAt: 'Saved {{date}}',
        method: 'Method',
        aiConfirmTitle: 'Request AI interpretation?',
        aiConfirmDesc: 'This sends your hexagram details for an AI reading. Continue when you are ready.',
        deleteConfirmTitle: 'Delete this reading?',
        deleteConfirmDesc: 'This removes the saved reading from your history.',
        loadingHexagrams: 'Unable to load hexagram library.',
        historyLoadError: 'Unable to load history.',
        saveSuccess: 'Reading saved to history.',
        saveFailed: 'Save failed.',
        loginRequiredAi: 'Create an account to unlock AI interpretation.',
        loginRequiredSave: 'Create an account to save this reading.',
        divineFirst: 'Divine a hexagram first.',
        divineFirstSave: 'Divine a hexagram before saving.',
        searchPlaceholder: 'Search',
        hexagramLibrary: 'Hexagram Library',
        hexagramsLoaded: '{{count}} hexagrams loaded',
        noMatches: 'No hexagrams match that search.',
        errors: {
          numberRequired: 'Number is required.',
          numberInvalid: 'Enter a valid number.',
          numberMin: 'Enter a number of at least 1.',
          correctFields: 'Please correct the highlighted fields.'
        }
      },
      tarot: {
        title: 'Tarot Sanctuary',
        subtitle: 'Focus on your question and choose a spread to reveal the story.',
        questionPlaceholder: 'What is your question? (Optional)',
        drawCard: 'Draw {{label}}',
        shuffling: 'Shuffling...',
        guestMode: 'Guest mode: Single Card only',
        guestDrawSuccess: 'Guest draw completed. Log in to unlock spreads & AI.',
        yourSpread: 'Your Spread',
        revealAi: 'Reveal AI Meaning',
        revealing: 'Revealing...',
        whisper: 'Often the cards whisper...',
        historyTitle: 'Saved Readings',
        historySubtitle: 'AI interpretations are automatically saved after each reading.',
        noHistory: 'No readings saved yet. Complete an AI interpretation to begin a history trail.',
        historyCount: '{{count}} entries',
        remove: 'Remove',
        generalReading: 'General Reading',
        libraryTitle: 'Tarot Library',
        librarySubtitle: 'Browse the full 78-card deck.',
        loadDeck: 'Load Deck',
        reloadDeck: 'Reload Deck',
        loading: 'Loading...',
        loadError: 'Unable to load deck',
        aiConfirmTitle: 'Request AI interpretation?',
        aiConfirmDesc: 'This sends your spread details for an AI reading. Continue when you are ready.',
        deleteConfirmTitle: 'Delete this reading?',
        deleteConfirmDesc: 'This removes the saved reading from your history.',
        celticCrossPositions: 'Celtic Cross Positions',
        celticCrossDesc: 'Each position adds context to the story unfolding across the spread.',
        celticPositions: {
          p1: { label: 'Present', meaning: 'Your current situation or heart of the matter.' },
          p2: { label: 'Challenge', meaning: 'The obstacle, tension, or crossing influence.' },
          p3: { label: 'Past', meaning: 'Recent past events or influences fading.' },
          p4: { label: 'Future', meaning: 'Near-future direction or next steps.' },
          p5: { label: 'Above', meaning: 'Conscious goals, aspirations, or ideals.' },
          p6: { label: 'Below', meaning: 'Subconscious roots, foundations, or hidden motives.' },
          p7: { label: 'Advice', meaning: 'Guidance on how to respond or proceed.' },
          p8: { label: 'External', meaning: 'Outside influences, people, or environment.' },
          p9: { label: 'Hopes/Fears', meaning: 'Inner desires, anxieties, or expectations.' },
          p10: { label: 'Outcome', meaning: 'Likely outcome if current course continues.' }
        },
        position: 'Position',
        reversed: 'Reversed',
        spreads: {
          single: 'Single Card',
          three: 'Three Card',
          celtic: 'Celtic Cross',
          SingleCard: 'Single Card',
          ThreeCard: 'Three Card',
          CelticCross: 'Celtic Cross'
        },
        weeklySnapshot: 'Weekly Zodiac Snapshot',
        weeklySnapshotSubtitle: 'Pull a weekly horoscope without leaving Tarot.',
        getPeriodHoroscope: 'Get {{period}} Horoscope',
        unlockDeck: 'Unlock the full deck',
        unlockDeckSubtitle: 'Create an account to explore advanced spreads, save readings, and request AI interpretations.',
        spreadType: 'Spread type',
        sign: 'Sign',
        period: 'Period',
        horoscope: 'Horoscope',
        present: 'Present',
        challenge: 'Challenge',
        past: 'Past',
        future: 'Future',
        above: 'Above',
        below: 'Below',
        advice: 'Advice',
        external: 'External',
        hopesFears: 'Hopes/Fears',
        outcome: 'Outcome',
        errors: {
          wsError: 'WebSocket connection error.',
          wsClosed: 'Connection closed unexpectedly.',
          connError: 'Connection error'
        },
        horoscopeLoaded: '{{name}} {{period}} {{label}} loaded.'
      },
      zodiac: {
        title: 'Zodiac Chronicles',
        subtitle: 'Select your sign and tap into daily, weekly, or monthly guidance.',
        chooseSign: 'Choose your sign',
        focus: 'Focus',
        getHoroscope: 'Get Horoscope',
        readingStars: 'Reading the stars...',
        loadingSign: 'Loading sign details...',
        profileTitle: 'Sign Profile',
        cosmicPatterns: 'Cosmic Patterns',
        compatibilityTitle: 'Compatibility Compass',
        compatibilitySubtitle: 'Compare your sign with another to reveal the cosmic chemistry.',
        checkCompatibility: 'Check Compatibility',
        calculating: 'Calculating...',
        primary: 'Primary',
        matchWith: 'Match with',
        score: 'Score',
        summary: 'Summary',
        horoscopeTitle: '{{sign}} {{period}} Horoscope',
        generatedAt: 'Generated {{date}}',
        overview: 'Overview',
        love: 'Love',
        career: 'Career',
        wellness: 'Wellness',
        luckyColors: 'Lucky colors',
        luckyNumbers: 'Lucky numbers',
        mantra: 'Mantra',
        timeOracleTitle: 'I Ching Time Oracle',
        timeOracleSubtitle: 'Draw a hexagram using the current moment to reveal hidden currents.',
        revealTimeHexagram: 'Reveal Time Hexagram',
        consultingTime: 'Consulting time...',
        risingTitle: 'Calculate Your Rising Sign',
        risingSubtitle: 'Enter your birth date, time, and location to reveal your ascendant.',
        revealRising: 'Reveal Rising Sign',
        risingSign: 'Rising Sign',
        ascendantLongitude: 'Ascendant Longitude',
        localSiderealTime: 'Local Sidereal Time',
        element: 'Element',
        modality: 'Modality',
        rulingPlanet: 'Ruling Planet',
        symbol: 'Symbol',
        keywords: 'Keywords',
        latitude: 'Latitude',
        longitude: 'Longitude',
        timeContext: 'Time context',
        strengths: 'Strengths',
        challenges: 'Challenges',
        compatibility: 'Compatibility',
        signs: {
          aries: 'Aries',
          taurus: 'Taurus',
          gemini: 'Gemini',
          cancer: 'Cancer',
          leo: 'Leo',
          virgo: 'Virgo',
          libra: 'Libra',
          scorpio: 'Scorpio',
          sagittarius: 'Sagittarius',
          capricorn: 'Capricorn',
          aquarius: 'Aquarius',
          pisces: 'Pisces'
        },
        periods: {
          daily: 'Daily',
          weekly: 'Weekly',
          monthly: 'Monthly'
        },
        ranges: {
          aries: 'Mar 21 - Apr 19',
          taurus: 'Apr 20 - May 20',
          gemini: 'May 21 - Jun 20',
          cancer: 'Jun 21 - Jul 22',
          leo: 'Jul 23 - Aug 22',
          virgo: 'Aug 23 - Sep 22',
          libra: 'Sep 23 - Oct 22',
          scorpio: 'Oct 23 - Nov 21',
          sagittarius: 'Nov 22 - Dec 21',
          capricorn: 'Dec 22 - Jan 19',
          aquarius: 'Jan 20 - Feb 18',
          pisces: 'Feb 19 - Mar 20'
        },
        errors: {
          unknownSign: 'Unknown zodiac sign in URL.',
          unknownPeriod: 'Unknown horoscope period in URL.',
          risingFailed: 'Unable to calculate rising sign.',
          compatibilityFailed: 'Unable to calculate compatibility.',
          horoscopeFailed: 'Unable to fetch horoscope.',
          signInfoFailed: 'Unable to load sign info.'
        },
      },
      ziwei: {
        title: 'Zi Wei Atlas',
        subtitle: 'V2 preview · Generate a lightweight Zi Wei chart with palace stars and transformations.',
        generateChart: 'Generate Zi Wei Chart',
        reset: 'Reset',
        chartReady: 'Chart ready',
        chartReadyDesc: 'Save this Zi Wei chart to your history.',
        aiInterpret: 'Request AI Interpretation',
        interpreting: 'Interpreting...',
        lunarDate: 'Lunar Date',
        leap: 'Leap',
        keyPalaces: 'Key Palaces',
        birthTime: 'Birth Time',
        utcOffset: 'UTC offset',
        transformations: 'Four Transformations',
        noTransformations: 'No transformations available.',
        palaceGrid: 'Palace Grid',
        palace: 'Palace',
        majorStars: 'Major Stars',
        minorStars: 'Minor Stars',
        aiAnalysis: 'AI Interpretation',
        aiAnalysisDesc: 'Generate a concise interpretation of your Zi Wei chart.',
        noAiYet: 'No AI interpretation yet.',
        wizardTitle: 'Guided Wizard',
        wizardSubtitle: 'Complete the Zi Wei flow',
        wizardComplete: 'Wizard complete',
        wizardCompleteDesc: 'Your Zi Wei chart has been saved. You can review it in history or start a new one.',
        step: 'Step {{current}} of {{total}}',
        goToStep: 'Go to step',
        locked: 'Locked',
        mingPalace: 'Ming Palace',
        shenPalace: 'Shen Palace',
        page: 'Page {{current}} of {{total}}',
        historyTitle: 'Zi Wei History',
        historySubtitle: 'Review saved Zi Wei charts and reload them.',
        refresh: 'Refresh',
        refreshing: 'Refreshing...',
        noHistory: 'No Zi Wei history yet.',
        load: 'Load',
        startNew: 'Start new chart',
        aiConfirmTitle: 'Request AI interpretation?',
        aiConfirmDesc: 'This sends your Zi Wei chart details for an AI summary. Continue when you are ready.',
        deleteConfirmTitle: 'Delete this Zi Wei chart?',
        deleteConfirmDesc: 'This removes the saved Zi Wei chart from your history.',
        errors: {
          loginRequired: 'Please login to access Zi Wei charts.',
          loginRequiredSave: 'Please login to save this chart.',
          loginRequiredAi: 'Please login to request AI interpretation.',
          generateFirst: 'Generate a Zi Wei chart before saving.',
          generateFirstAi: 'Generate a Zi Wei chart before requesting AI interpretation.',
          calculateFailed: 'Unable to calculate Zi Wei chart.',
          saveFailed: 'Save failed.',
          loadHistoryFailed: 'Unable to load history.',
          loadRecordFailed: 'Unable to load this history record.'
        },
        steps: {
          birth: { title: 'Birth Details', desc: 'Enter birth data to generate the chart.' },
          review: { title: 'Review Chart', desc: 'Review the palaces and transformations.' },
          save: { title: 'Save & Finish', desc: 'Save the chart to complete the wizard.' }
        }
      },
      admin: {
        verifying: 'Verifying admin access...',
        forbiddenTitle: '403 - Forbidden',
        forbiddenDesc: 'You do not have access to this admin area.',
        areaTitle: 'Admin Area',
        areaDesc: 'Restricted area for administrators.'
      },
      '404': {
        title: 'Page not found',
        desc: "We couldn't find",
        thisPage: 'this page',
        mist: '—the path fades into the mist.'
      }
    }
  },
  'zh-CN': {
    translation: {
      nav: {
        home: '首页',
        login: '登录',
        bazi: '八字',
        tarot: '塔罗',
        iching: '周易',
        zodiac: '星座',
        ziwei: '紫微',
        profile: '个人中心',
        history: '历史记录',
        favorites: '收藏',
        logout: '退出登录',
        skip: '跳到主要内容',
        admin: '管理员',
        toggleMenu: '切换菜单',
        switchToEn: '切换到英文',
        switchToZh: '切换到中文',
        switchToTw: '切换到繁体中文'
      },
      common: {
        save: '保存',
        cancel: '取消',
        ok: '确定',
        delete: '删除',
        loading: '加载中...',
        calculating: '计算中...',
        retry: '重试',
        error: '错误',
        success: '成功',
        warning: '警告',
        back: '返回',
        none: '无',
        action: '操作',
        year: '年',
        month: '月',
        day: '日',
        loadingAccount: '正在加载账号信息...',
        loadAccountError: '无法加载您的账号信息，请重试。',
        signInAgain: '重新登录'
      },
      errors: {
        network: '网络错误，请检查您的连接并重试。',
        unknown: '发生未知错误。',
        offline: '您目前处于离线状态，请重新连接以重试。',
        unsavedChanges: '您有未保存的更改，确定要离开此页面吗？',
        saveInProgress: '正在保存中，请稍候再离开此页面。',
        loadLocations: '无法加载地点信息。',
        actionQueued: '{{label}} 已加入重试队列。',
        itemsFailed: '{{count}} 个项目失败'
      },
      home: {
        title: '八字大师',
        subtitle: '以古老智慧解读你的命运',
        cta: '开启探索',
        oraclePlatform: '神谕平台',
        modules: {
          bazi: { desc: '四柱命盘与五行分布' },
          tarot: { desc: '每日抽牌与多样牌阵' },
          iching: { desc: '周易六十四卦启示' },
          zodiac: { desc: '星座运势与性格特质' },
          ziwei: { desc: '紫微斗数命盘预览' }
        }
      },
      login: {
        title: '欢迎回来',
        email: '邮箱',
        password: '密码',
        submit: '登录',
        registerTitle: '创建账号',
        registerSubmit: '创建账号',
        sessionExpired: '登录已过期，请重新登录以继续操作。',
        errors: {
          emailRequired: '需输入邮箱。',
          emailInvalid: '请输入有效的邮箱地址。',
          passwordRequired: '需输入密码。',
          passwordStrength: '密码必须至少为 8 位，且包含字母和数字。',
          passwordsNotMatch: '两次输入的密码不一致。',
          nameTooShort: '姓名至少需要 2 个字符。',
          loginFailed: '邮箱或密码错误。',
          tokenRequired: '需输入重置代码。',
          newPasswordRequired: '需输入新密码。'
        },
        ui: {
          displayName: '显示名称（可选）',
          confirmPassword: '确认密码',
          forgotPassword: '忘记密码？',
          haveCode: '已有重置代码？',
          newHere: '新用户？',
          backToLogin: '返回登录',
          resetPassword: '重置密码',
          setNewPassword: '设置新密码',
          sendResetLink: '发送重置链接',
          updatePassword: '更新密码',
          resetSent: '如果该邮箱已注册，重置链接已发送。',
          passwordUpdated: '密码已更新，请重新登录。',
          continueWithGoogle: '使用 Google 继续',
          continueWithWeChat: '使用微信继续',
          demoAccess: '仅供演示：请使用任意邮箱和密码继续。',
          resetCode: '重置代码',
          newPassword: '新密码',
          pasteResetCode: '粘贴重置代码',
          sending: '发送中...',
          updating: '更新中...',
          resetDemoHint: '演示提示：重置代码已记录在服务器日志中。',
          resendReset: '重新发送链接',
          registering: '注册中...'
        }
      },
      protected: {
        title: '圣典档案',
        subtitle: '仅注册用户可进入此处。'
      },
      bazi: {
        title: '八字命盘',
        subtitle: '输入出生信息即可生成四柱与五行分布。',
        birthYear: '出生年份',
        birthMonth: '出生月份',
        birthDay: '出生日',
        birthHour: '出生时辰 (0-23)',
        gender: '性别',
        genderPlaceholder: '请选择性别',
        genderFemale: '女性',
        genderMale: '男性',
        birthLocation: '出生地',
        locationPlaceholder: '城市 / 国家',
        locationHint: '支持坐标（纬度, 经度）或常见城市，如北京、上海、伦敦、纽约。',
        timezone: '时区',
        calculate: '开始排盘',
        fullAnalysis: '请求完整解读',
        saveRecord: '保存到历史',
        addFavorite: '加入收藏',
        reset: '重置',
        retryNow: '立即重试',
        dismiss: '忽略',
        calculated: '基础命盘已生成。',
        restored: '已恢复上次游客排盘结果。',
        fullReady: '完整解读已就绪。',
        saved: '记录已保存到历史。',
        favorited: '已加入收藏。',
        favoriteReady: '收藏成功，可在收藏页查看。',
        loginRequired: '请先登录以使用此功能。',
        saveFirst: '请先保存记录再收藏。',
        fullRequired: '请先生成完整解读后再请求 AI。',
        aiInterpret: '打开 AI 解读',
        aiOpen: '打开 AI 解读窗口',
        aiThinking: 'AI 解读生成中…',
        aiReady: 'AI 解读已生成。',
        aiAnalysis: 'AI 八字解读',
        fourPillars: '四柱',
        fiveElements: '五行分布',
        tenGods: '十神概览',
        luckCycles: '大运排盘',
        timeContext: '时间校准',
        timezoneInput: '输入时区',
        timezoneResolved: '解析偏移',
        birthUtc: '换算为 UTC',
        trueSolarTime: '真太阳时',
        trueSolarCorrection: '真太阳时修正',
        trueSolarLocation: '使用的地点',
        trueSolarUnavailable: '不可用（未识别地点）',
        timezoneUnavailable: '未能解析',
        waiting: '请输入出生信息生成结果。',
        fullWaiting: '请求完整解读后可查看。',
        year: '年柱',
        month: '月柱',
        day: '日柱',
        hour: '时柱',
        elements: {
          Wood: '木',
          Fire: '火',
          Earth: '土',
          Metal: '金',
          Water: '水'
        },
        errors: {
          yearRequired: '需输入出生年份。',
          yearInvalid: '请输入有效的年份。',
          monthRequired: '需输入出生月份。',
          monthInvalid: '请输入有效的月份 (1-12)。',
          dayRequired: '需输入出生日期。',
          dayInvalid: '请输入有效的日期 (1-31)。',
          dateInvalid: '请输入有效的日期。',
          futureDate: '出生日期不能晚于当前时间。',
          hourRequired: '需输入出生时辰。',
          hourInvalid: '请输入有效的时辰 (0-23)。',
          genderRequired: '需选择性别。',
          locationWhitespace: '出生地不能为空白。',
          timezoneWhitespace: '时区不能为空白。',
          calculateFailed: '排盘失败。',
          alreadySaved: '记录已保存。',
          saveBeforeFavorite: '请在保存到历史前先进行排盘。'
        },
        retry: {
          bazi_calculate: '命盘计算',
          bazi_full_analysis: '深度解读',
          bazi_save: '保存记录',
          bazi_favorite: '添加收藏',
          bazi_ziwei: '紫微命盘'
        }
      },
      history: {
        detailsTitle: '八字记录',
        recordHeading: '记录 #{{id}}',
        detailsSubtitle: '查看已保存的命盘详情与时间校准信息。',
        viewDetails: '查看详情',
        backToHistory: '返回历史',
        recordLoading: '正在加载记录…',
        recordInvalid: '记录编号无效。',
        recordMissing: '未找到记录。',
        recordLoadError: '无法加载记录。',
        exportFiltered: '导出已筛选',
        exportAll: '导出全部',
        exporting: '导出中...', 
        importFile: '导入文件',
        importing: '导入中...', 
        importSuccess: '已成功导入 {{count}} 条记录。',
        importError: '无法导入记录。',
        noRecordsToExport: '没有可导出的记录。',
        exportSuccess: '历史记录导出成功。',
        searchPlaceholder: '地点、时区、干支',
        allGenders: '所有性别',
        allTime: '所有时间',
        today: '今日',
        thisWeek: '本周',
        last7Days: '最近 7 天',
        last30Days: '最近 30 天',
        last90Days: '最近 90 天',
        newestSaved: '最近保存',
        oldestSaved: '最早保存',
        newestBirth: '最近出生',
        oldestBirth: '最早出生',
        resetFilters: '重置筛选',
        deletedRecords: '已删除记录',
        deletedRecordsDesc: '你可以恢复从历史中移除的记录。',
        restore: '恢复',
        recover: '找回',
        deletePermanently: '永久删除',
        recordRestored: '记录已恢复。',
        recordHardDeleted: '记录已永久删除。',
        noResults: '未找到结果',
        noResultsDesc: '请尝试清除筛选条件或搜索其他地点/干支。',
        noRecordsYet: '目前没有匹配条件的记录。',
        edit: '编辑',
        editing: '编辑中',
        saveChanges: '保存更改',
        selectGender: '请选择性别',
        invalidYear: '请输入有效的年份。',
        invalidMonth: '请输入有效的月份。',
        invalidDay: '请输入有效的日期。',
        invalidHour: '请输入有效的时辰。',
        invalidDate: '无效的日期。',
        bulkDeleteTitle: '删除选中的 {{count}} 条记录？',
        bulkDeleteDesc: '这将把选中的记录从历史中移除。你可以稍后恢复它们。',
        deleteSelected: '删除选中',
        recordDeleted: '记录已删除。',
        alreadyDeleted: '记录已被删除。',
        alreadyRemoved: '记录已被移除。',
        restoreError: '无法恢复记录。',
        deleteError: '无法删除记录。',
        updateError: '无法更新记录。',
        fixFields: '请修正高亮显示的字段以继续。',
        yearPillar: '年柱',
        dayPillar: '日柱',
        pageOf: '第 {{current}} 页，共 {{total}} 页',
        sharedLoaded: '已加载分享记录',
        clearLink: '清除链接',
        birth: '出生',
        profile: '资料',
        selectAll: '全选',
        selectedCount: '已选中 {{count}} 条',
        clear: '清除'
      },
      profile: {
        title: '个人中心',
        subtitle: '仅注册用户可进入此处。',
        name: '姓名',
        displayName: '显示名称',
        email: '邮箱',
        settingsTitle: '个人设置',
        settingsSubtitle: '保持你的语言偏好与通知设置在不同设备间同步。',
        locale: '语言',
        displayNamePlaceholder: '为你的个人资料添加一个简短名称',
        displayNameHint: '2-40 个字符。',
        preferences: '偏好设置',
        dailyGuidance: '每日引导',
        dailyGuidanceDesc: '获取根据你的命盘生成的每日提示。',
        ritualReminders: '仪式提醒',
        ritualRemindersDesc: '接收你选择的择时仪式提醒。',
        researchUpdates: '研究动态',
        researchUpdatesDesc: '随时了解最新的分析方法与洞察。',
        aiProvider: 'AI 提供商',
        aiProviderDesc: '选择用于解读的 AI 模型。仅启用的提供商可被保存。',
        preferredProvider: '首选提供商',
        useDefault: '使用默认',
        activeServerProvider: '当前服务器提供商',
        providersEnabled: '{{count}} 个提供商已启用。',
        noProvidersEnabled: '未启用提供商。使用回退摘要。',
        saveSettings: '保存设置',
        saving: '保存中…',
        settingsSaved: '设置已保存。',
        cancel: '取消',
        dangerZone: '危险区域',
        dangerZoneDesc: '不可逆操作，请谨慎进行。',
        deleteAccount: '删除账号',
        deleteAccountTitle: '确定删除账号？',
        deleteAccountDesc: '这将永久删除你的个人资料、历史记录、收藏和设置。此操作无法撤销。',
        confirmDelete: '确认删除',
        historySnapshot: '历史快照',
        historySnapshotDesc: '同步自你账号的最近八字历史记录。',
        openHistory: '打开历史',
        totalRecords: '总记录数',
        showingLatest: '显示最近 3 条记录',
        noHistory: '暂无历史记录。',
        ziweiQuickChart: '紫微 (V2) 快速排盘',
        ziweiQuickChartDesc: '使用你最近的一条八字记录生成紫微命盘。',
        latestBaziRecord: '最近保存的八字记录',
        noRecordAvailable: '没有可用记录',
        generateZiwei: '生成紫微命盘',
        ziweiReady: '已根据你最近的八字记录生成紫微命盘。',
        createBaziFirst: '请先创建八字记录以解锁紫微快速排盘。',
        saveBaziFirst: '请先保存一条八字记录以生成紫微命盘。',
        calculating: '正在计算…',
        optional: '可选',
        unavailable: '不可用',
        unknown: '未知',
        mins: '分钟',
        leap: '闰'
      },
      favorites: {
        title: '收藏夹',
        subtitle: '你收藏的命盘记录，方便快速查看。',
        savedCount: '{{count}} 条已收藏',
        availableToAdd: '{{count}} 条可添加',
        noFavorites: '暂无收藏',
        noFavoritesDesc: '保存一条记录，它将出现在这里。',
        addFromHistory: '从历史中添加',
        addFromHistoryDesc: '从你保存的记录中选择并加入收藏。',
        allFavorited: '所有记录已收藏',
        noHistoryYet: '暂无历史记录',
        noHistoryYetDesc: '先进行一次排盘，然后再添加到此处。',
        view: '查看',
        hide: '收起',
        share: '分享',
        remove: '移除',
        removing: '移除中…',
        adding: '添加中…',
        add: '加入收藏',
        shareSuccess: '分享成功。',
        shareFailed: '分享失败，已尝试复制到剪贴板。',
        copied: '已复制到剪贴板。',
        copyFailed: '无法复制分享文本。',
        loadError: '无法加载收藏夹。',
        recordsLoadError: '无法加载历史记录。',
        removeError: '无法移除收藏。',
        addError: '无法添加收藏。'
      },
      iching: {
        title: '易经占卜',
        subtitle: '专注于你的问题，让数字揭示潜藏的规律。',
        firstNumber: '第一个数字',
        secondNumber: '第二个数字',
        thirdNumber: '第三个数字',
        question: '你的问题（可选）',
        questionPlaceholder: '我今天需要什么样的引导？',
        divineNumbers: '数字起卦',
        divineTime: '时间起卦',
        divining: '起卦中…',
        revealed: '卦象已显现。',
        timeRevealed: '时间卦象已显现。',
        primaryHexagram: '主卦',
        resultingHexagram: '变卦',
        noResulting: '暂无变卦。',
        changingLines: '变爻',
        none: '无',
        timeUsed: '使用时间',
        line: '爻',
        aiInterpret: '获取 AI 解读',
        interpreting: '解读中…',
        oracleReflection: '神谕启示',
        historyTitle: '占卜历史',
        historySubtitle: '你最近的占卜记录。',
        noHistory: '暂无保存的记录。',
        savedAt: '保存于 {{date}}',
        method: '起卦方式',
        aiConfirmTitle: '请求 AI 解读？',
        aiConfirmDesc: '这将把卦象发送给 AI 进行深度解读。准备好后请继续。',
        deleteConfirmTitle: '删除此记录？',
        deleteConfirmDesc: '这将从历史记录中移除该占卜结果。',
        loadingHexagrams: '无法加载卦象库。',
        historyLoadError: '无法加载历史记录。',
        saveSuccess: '记录已保存到历史。',
        saveFailed: '保存失败。',
        loginRequiredAi: '创建账号以解锁 AI 解读功能。',
        loginRequiredSave: '创建账号以保存此占卜结果。',
        divineFirst: '请先进行起卦。',
        divineFirstSave: '请在保存前先进行起卦。',
        searchPlaceholder: '搜索',
        hexagramLibrary: '六十四卦全书',
        hexagramsLoaded: '已加载 {{count}} 个卦象',
        noMatches: '未找到匹配的卦象。',
        errors: {
          numberRequired: '需输入数字。',
          numberInvalid: '请输入有效的数字。',
          numberMin: '数字至少需要为 1。',
          correctFields: '请修正高亮显示的字段。'
        }
      },
      tarot: {
        title: '塔罗圣境',
        subtitle: '专注于你的问题，选择一个牌阵来揭开故事。',
        questionPlaceholder: '你的问题是什么？（可选）',
        drawCard: '抽取 {{label}}',
        shuffling: '洗牌中…',
        guestMode: '游客模式：仅限单张牌',
        guestDrawSuccess: '游客抽取完成。登录以解锁更多牌阵与 AI 解读。',
        yourSpread: '你的牌阵',
        revealAi: '揭示 AI 含义',
        revealing: '揭示中…',
        whisper: '纸牌在低声诉说…',
        historyTitle: '保存的记录',
        historySubtitle: 'AI 解读将在每次阅读后自动保存。',
        noHistory: '暂无保存的记录。完成一次 AI 解读即可开始记录。',
        historyCount: '{{count}} 条记录',
        remove: '移除',
        generalReading: '常规阅读',
        libraryTitle: '塔罗资料库',
        librarySubtitle: '浏览全部 78 张塔罗牌。',
        loadDeck: '加载卡组',
        reloadDeck: '重新加载',
        loading: '加载中…',
        loadError: '无法加载卡组',
        aiConfirmTitle: '请求 AI 解读？',
        aiConfirmDesc: '这将把牌阵详情发送给 AI。准备好后请继续。',
        deleteConfirmTitle: '删除此记录？',
        deleteConfirmDesc: '这将从历史记录中移除该阅读结果。',
        celticCrossPositions: '凯尔特十字位置含义',
        celticCrossDesc: '每个位置都为牌阵中展开的故事增添了背景。',
        position: '位置',
        reversed: '逆位',
        spreads: {
          single: '单张牌',
          three: '三张牌',
          celtic: '凯尔特十字',
          SingleCard: '单张牌',
          ThreeCard: '三张牌',
          CelticCross: '凯尔特十字'
        },
        weeklySnapshot: '每周星座快照',
        weeklySnapshotSubtitle: '无需离开塔罗即可获取每周运势。',
        getPeriodHoroscope: '获取{{period}}运势',
        unlockDeck: '解锁完整牌组',
        unlockDeckSubtitle: '创建账户以探索高级牌阵、保存记录并请求 AI 解读。',
        spreadType: '牌阵类型',
        sign: '星座',
        period: '周期',
        horoscope: '运势',
        present: '现状',
        challenge: '挑战',
        past: '过去',
        future: '未来',
        above: '高处',
        below: '基础',
        advice: '建议',
        external: '环境',
        hopesFears: '愿望/恐惧',
        outcome: '结果',
        errors: {
          wsError: 'WebSocket 连接错误。',
          wsClosed: '连接意外关闭。',
          connError: '连接错误'
        },
        horoscopeLoaded: '{{name}} {{period}} {{label}}已加载。'
      },
      zodiac: {
        title: '星座编年史',
        subtitle: '选择你的星座，获取每日、每周或每月的指引。',
        chooseSign: '选择你的星座',
        focus: '当前焦点',
        getHoroscope: '查看运势',
        readingStars: '观测星象中…',
        loadingSign: '正在加载星座详情…',
        profileTitle: '星座概况',
        cosmicPatterns: '宇宙特质',
        compatibilityTitle: '星座契合度',
        compatibilitySubtitle: '比较你的星座与另一个星座，揭示宇宙间的化学反应。',
        checkCompatibility: '查看契合度',
        calculating: '计算中…',
        primary: '主星座',
        matchWith: '配对星座',
        score: '分数',
        summary: '总结',
        horoscopeTitle: '{{sign}} {{period}} 运势',
        generatedAt: '生成于 {{date}}',
        overview: '总运',
        love: '爱情',
        career: '事业',
        wellness: '健康',
        luckyColors: '幸运色',
        luckyNumbers: '幸运数字',
        mantra: '箴言',
        timeOracleTitle: '易经时间神谕',
        timeOracleSubtitle: '利用当前时刻起卦，揭示潜藏的趋势。',
        revealTimeHexagram: '揭示时间卦象',
        consultingTime: '咨询时间中…',
        risingTitle: '计算你的上升星座',
        risingSubtitle: '输入出生日期、时间和地点来揭示你的上升点。',
        revealRising: '揭示上升星座',
        risingSign: '上升星座',
        ascendantLongitude: '上升点经度',
        localSiderealTime: '地方恒星时',
        element: '要素',
        modality: '形态',
        rulingPlanet: '主宰星',
        symbol: '象征',
        keywords: '关键词',
        latitude: '纬度',
        longitude: '经度',
        timeContext: '时间背景',
        strengths: '优势',
        challenges: '挑战',
        compatibility: '契合星座',
        signs: {
          aries: '白羊座',
          taurus: '金牛座',
          gemini: '双子座',
          cancer: '巨蟹座',
          leo: '狮子座',
          virgo: '处女座',
          libra: '天秤座',
          scorpio: '天蝎座',
          sagittarius: '射手座',
          capricorn: '摩羯座',
          aquarius: '水瓶座',
          pisces: '双鱼座'
        },
        periods: {
          daily: '每日',
          weekly: '每周',
          monthly: '每月'
        },
        ranges: {
          aries: '3月21日 - 4月19日',
          taurus: '4月20日 - 5月20日',
          gemini: '5月21日 - 6月20日',
          cancer: '6月21日 - 7月22日',
          leo: '7月23日 - 8月22日',
          virgo: '8月23日 - 9月22日',
          libra: '9月23日 - 10月22日',
          scorpio: '10月23日 - 11月21日',
          sagittarius: '11月22日 - 12月21日',
          capricorn: '12月22日 - 1月19日',
          aquarius: '1月20日 - 2月18日',
          pisces: '2月19日 - 3月20日'
        },
        errors: {
          unknownSign: 'URL 中存在未知的星座。',
          unknownPeriod: 'URL 中存在未知的运势周期。',
          risingFailed: '无法计算上升星座。',
          compatibilityFailed: '无法计算契合度。',
          horoscopeFailed: '无法获取运势。',
          signInfoFailed: '无法加载星座信息。'
        }
      },
      ziwei: {
        title: '紫微图谱',
        subtitle: 'V2 预览 · 生成包含宫位星曜与四化的轻量级紫微命盘。',
        generateChart: '生成紫微命盘',
        reset: '重置',
        chartReady: '命盘已就绪',
        chartReadyDesc: '将此紫微命盘保存到历史记录。',
        aiInterpret: '请求 AI 解读',
        interpreting: '解读中…',
        lunarDate: '农历日期',
        leap: '闰',
        keyPalaces: '关键宫位',
        birthTime: '出生时间',
        utcOffset: 'UTC 偏移',
        transformations: '四化星曜',
        noTransformations: '暂无四化信息。',
        palaceGrid: '宫位网格',
        palace: '宫位',
        majorStars: '主星',
        minorStars: '助星',
        aiAnalysis: 'AI 深度解读',
        aiAnalysisDesc: '为你的紫微命盘生成简明扼要的解读。',
        noAiYet: '暂无 AI 解读。',
        wizardTitle: '引导助手',
        wizardSubtitle: '完成紫微排盘流程',
        wizardComplete: '流程已完成',
        wizardCompleteDesc: '你的紫微命盘已保存。你可以在历史中查看或开始新的排盘。',
        step: '第 {{current}} 步（共 {{total}} 步）',
        goToStep: '跳转到此步骤',
        locked: '已锁定',
        mingPalace: '命宫',
        shenPalace: '身宫',
        page: '第 {{current}} 页，共 {{total}} 页',
        historyTitle: '紫微历史',
        historySubtitle: '查看并重新加载已保存的紫微命盘。',
        refresh: '刷新',
        refreshing: '刷新中…',
        noHistory: '暂无紫微历史记录。',
        load: '加载',
        startNew: '开始新排盘',
        aiConfirmTitle: '请求 AI 解读？',
        aiConfirmDesc: '这将把紫微命盘详情发送给 AI 以生成摘要。准备好后请继续。',
        deleteConfirmTitle: '删除此紫微命盘？',
        deleteConfirmDesc: '这将从历史记录中移除该紫微命盘。',
        errors: {
          loginRequired: '请登录后查看紫微命盘。',
          loginRequiredSave: '请登录后保存命盘。',
          loginRequiredAi: '请登录后请求 AI 解读。',
          generateFirst: '保存前请先生成紫微命盘。',
          generateFirstAi: '请求 AI 解读前请先生成紫微命盘。',
          calculateFailed: '无法计算紫微命盘。',
          saveFailed: '保存失败。',
          loadHistoryFailed: '无法加载历史记录。',
          loadRecordFailed: '无法加载此历史记录。'
        },
        steps: {
          birth: { title: '出生信息', desc: '输入出生数据以生成命盘。' },
          review: { title: '查看命盘', desc: '查看各宫位星曜与四化。' },
          save: { title: '保存并完成', desc: '保存命盘以完成引导。' }
        }
      },
      admin: {
        verifying: '正在验证管理员权限...',
        forbiddenTitle: '403 - 无权访问',
        forbiddenDesc: '您没有权限访问此管理区域。',
        areaTitle: '管理员区域',
        areaDesc: '仅限管理员访问的受限区域。'
      },
      '404': {
        title: '页面未找到',
        desc: '我们无法找到',
        thisPage: '此页面',
        mist: '——该路径已没入迷雾中。'
      }
    }
  }
};

const STORAGE_KEY = 'locale';
const SUPPORTED_LOCALES = new Set(['en-US', 'zh-CN']);

const normalizeLocale = (locale) => {
  if (!locale) return 'en-US';
  if (locale.toLowerCase().startsWith('zh')) return 'zh-CN';
  if (SUPPORTED_LOCALES.has(locale)) return locale;
  return 'en-US';
};

const safeGetStoredLocale = () => {
  try {
    return localStorage.getItem(STORAGE_KEY);
  } catch {
    return null;
  }
};

const safeSetStoredLocale = (locale) => {
  try {
    localStorage.setItem(STORAGE_KEY, locale);
  } catch {
    // Ignore storage failures (e.g. private mode).
  }
};

const getInitialLocale = () => {
  const stored = safeGetStoredLocale();
  if (stored) return normalizeLocale(stored);
  return normalizeLocale(navigator.language);
};

void i18n
  .use(initReactI18next)
  .init({
    resources,
    lng: getInitialLocale(),
    fallbackLng: 'en-US',
    interpolation: { escapeValue: false }
  });

i18n.on('languageChanged', (locale) => {
  const normalized = normalizeLocale(locale);
  if (normalized !== locale) {
    void i18n.changeLanguage(normalized);
    return;
  }
  safeSetStoredLocale(normalized);
});

export default i18n;
